!function(){Object.create||(Object.create=function(n,t){function e(){}if("undefined"!=typeof t)throw"The multiple-argument version of Object.create is not provided by this browser and cannot be shimmed.";return e.prototype=n,new e});var n,t=function(){return{}},e=function(){},o=function(n,e){var o,i=window;if(n){var r=n.split(".");o=r.pop(),$.each(r,function(n,e){var o=i[e];return o?void(i=o):void(i=i[e]=new t)})}return o&&(i[o]=e),e},i=function(n,t){var e=t||window,o=e;if(n){var i=n.split(".");$.each(i,function(n,t){return o=e=e[t],o?void 0:!1})}return o},r=function(t){var e=t.name,r=t.view,c=t.parent;c?"string"==typeof c&&(c=i(c)):r&&(c=u.View);var f=a(c||n,t);return e?o(e,f):f},a=function(n,t){var e=n.prototype,o=Object.create(e),i=function(){var n=this.init;n&&n.apply(this,arguments)};return $.each(t,function(n,t){"method"==n?c(o,t):o[n]=t}),i.prototype=o,i},c=function(n,t){var e=t||{};$.each(e,function(t,e){var o=n[t];void 0!==o&&"function"==typeof o?n[t]=function(n,t){return function(){return this.parent=n,t.apply(this,arguments)}}(o,e):n[t]=e})};n=a(e,{on:function(n){var t,e=this.__eventMap,o=n.name,i=n.scope,r=n.fn;e||(e=this.__eventMap={}),t=e[o],t||(t=e[o]=[]),t.push({scope:i,fn:r})},fire:function(n,t){var e=this.__eventMap,o=(e?e[n]:[])||[];$.each(o,function(n,e){var o=e.scope,i=e.fn;i.call(o,t)})}});var u=window.nb={};u.name=o,u.define=r,u.extend=a}(),function(){var n=function(n,t){var e=function(e){function o(){t&&(t.width=this.width,t.height=this.height,t.url=n,t.image=a),r(),e.resolve(a)}function i(){r(),e.reject(a)}function r(){a.onload=null,a.onerror=null,a.onabort=null}var a=new Image;a.onload=o,a.onerror=i,a.onabort=i,a.src=n};return $.Deferred(e).promise()},t=function(t,e){var o=[];return $.each(t,function(t,i){var r=null;e&&(r={},e.push(r)),o.push(n(i,r))}),$.when.apply($,o)},e=function(n){var t=function(t){n.ready(function(){t.resolve(n)}),n.error(function(){t.reject(n)})};return $.Deferred(t).promise()},o=function(){for(var n,t=decodeURIComponent(window.location.search.substring(1)),e=t.split("&"),o={},i=0,r=e.length;r>i;i++)n=e[i].split("="),o[n[0]]=n[1];return o},i={loadImage:n,loadImageList:t,imgLoader:e,getUrlParameters:o};nb.name("nb.util",i)}(),function(){nb.define({name:"nb.Model",method:{init:function(){this.__model={},this.__eventMap={}},set:function(n,t,e){var o=this.__model,i=o[n],r=this.__eventMap,a=r[n],c=(a?a.before:[])||[],u={name:n,origin:i,data:t};e||$.each(c,function(n,t){var e=t.scope,o=t.fn;o.call(e,u)}),o[n]=t,c=(a?a.after:[])||[],$.each(c,function(n,t){if(t){var e=t.scope,o=t.fn,i=t.once;o.call(e,u),i&&delete c[n]}})},get:function(n){return this.__model[n]},onChange:function(n){var t,e=this.__eventMap,o=n.name,i=n.type||"after",r=n.once,a=n.scope,c=n.fn,u=e[o];u||(u={},e[o]=u),t=u[i],t||(t=[],u[i]=t),t.push({scope:a,fn:c,once:r})}}})}(),function(){var n=nb.define({method:{init:function(){this.model=new nb.Model}}});nb.name("nb.app",new n)}(),function(){var n=(nb.define({method:{init:function(){}}}),{string:function(n){var t=n.container.$(),e=t.prop("tagName").toLowerCase(),o=n.content;"input"==e?t.val(o):t.text(o)},object:function(n){var t=n.content,e=n.root,o=i(t,e),r=t.$name,a=o.$();if(n.container.$().append(a),r){var c="$"+r,u=e[c];if(u){if("array"!=$.type(u)){var f=[u];u=e[c]=f}u.push(o)}else e[c]=o}},array:function(n){$.each(n.content,function(e,o){t({container:n.container,root:n.root,content:o})})},undefined:function(){}}),t=function(t){var e=t.content,o=$.type(e);n[o](t)},e={"class":function(n,t,e){var o=t["class"];o&&n.$().addClass(o)},style:function(n,t,e){var o=t.style;o&&n.$().css(o)},content:function(n,e,o){t({container:n,root:o||n,content:e.content})}},o=function(n,t){var e;if(e=void 0!==n?this["$"+n]:this,!t)if($.isArray(e)){var o=[];$.each(e,function(n,t){o.push(t.$root||t.__viewInstance.$root)}),e=o}else e=e.$root||e.__viewInstance.$root;return e},i=function(n,t){var e;return e=n.$type?a(n,t):n.$template?r(n,t):c(n,t)},r=function(n,t){},a=function(n,t){var e=n.$type,o=new e;return o},c=function(n,t){var i=n.tag||"div",r=$("<"+i+">"),a={$root:r,$:o};return $.each(n,function(o,i){var c=o.toLowerCase();if("tag"==c)return!0;var u=e[o];u?u(a,n,t):0===c.indexOf("$")?r.attr("data-nb-"+c.substring(1),i):r.attr(c,i)}),a};nb.define({name:"nb.View",method:{init:function(){var n=this.view;n&&(this.__viewInstance=i(n))},$:function(n,t){return this.__viewInstance.$(n,t)}}})}();